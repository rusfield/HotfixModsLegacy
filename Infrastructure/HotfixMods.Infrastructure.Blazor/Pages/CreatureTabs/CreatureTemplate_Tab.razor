@using HotfixMods.Infrastructure.InfoModels
@using HotfixMods.Infrastructure.Blazor.Components.DtoContent
@using HotfixMods.Core.Enums.TrinityCore

@inject CreatureService Service

@inherits DtoContentBase<CreatureDto, CreatureTemplate>

<PagedDtoContent T="CreatureTemplate">
    <PagedDtoContentPage>
        <MudItem xs="3">
            <InlineGroup>
                <LeftContent>
                    <Input_Element T="short" @bind-Value="Value.Minlevel" ValueCompare="ValueCompare?.Minlevel" Label="@nameof(Value.Minlevel).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Minlevel))" />
                </LeftContent>
                <RightContent>
                    <Input_Element T="short" @bind-Value="Value.Maxlevel" ValueCompare="ValueCompare?.Maxlevel" Label="@nameof(Value.Maxlevel).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Maxlevel))" />
                </RightContent>
            </InlineGroup>
            <Input_Element T="ushort" @bind-Value="Value.Faction" ValueCompare="ValueCompare?.Faction" Label="@nameof(Value.Faction).ToDisplayName()"OnInfoAdornmentClick="@(OpenInfoDialog(info.Faction))" GetOptionsAsync_Func="(async () => await Service.GetFactionOptionsAsync())" />
            <Input_Element T="byte" @bind-Value="Value.Rank" ValueCompare="ValueCompare?.Rank" Label="@nameof(Value.Rank).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Rank))" GetOptionsAsync_Func="Service.GetRankOptionsAsync" />
            <Input_Element T="decimal" @bind-Value="Value.Scale" ValueCompare="ValueCompare?.Scale" Label="@nameof(Value.Scale).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Scale))" />
            <Input_Element T="byte" @bind-Value="Value.Type" ValueCompare="ValueCompare?.Type" Label="@nameof(Value.Type).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Type))" GetOptionsAsync_Func="Service.GetCreatureTypeOptionsAsync" />
            <Input_Element T="byte" @bind-Value="Value.RacialLeader" ValueCompare="ValueCompare?.RacialLeader" Label="@nameof(Value.RacialLeader).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.RacialLeader))" GetOptionsAsync_Func="GetTrueFalse" />
        </MudItem>
        <MudItem xs="6">
            <Placeholder_Element Amount="4" />
            <InlineGroup>
                <LeftContent>
                    <Input_Element T="string" @bind-Value="Value.Name" ValueCompare="ValueCompare?.Name" Label="@nameof(Value.Name).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Name))" />
                </LeftContent>
                <RightContent>
                    <Input_Element T="string" @bind-Value="Value.FemaleName" ValueCompare="ValueCompare?.FemaleName" Label="@nameof(Value.FemaleName).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.FemaleName))" />
                </RightContent>
            </InlineGroup>
            <InlineGroup Merged="false">
                <LeftContent>
                    <Input_Element T="string" Variant="Variant.Text" @bind-Value="Value.Subname" ValueCompare="ValueCompare?.Subname" Label="@nameof(Value.Subname).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Subname))" />
                </LeftContent>
                <RightContent>
                    <Input_Element T="string" Variant="Variant.Text" @bind-Value="Value.TitleAlt" ValueCompare="ValueCompare?.TitleAlt" Label="@nameof(Value.TitleAlt).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.TitleAlt))" />
                </RightContent>
            </InlineGroup>
        </MudItem>
        <MudItem xs="3">
            <Input_Element T="decimal" @bind-Value="Value.Speed_Walk" ValueCompare="ValueCompare?.Speed_Walk" Label="@nameof(Value.Speed_Walk).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Speed_Walk))" />
            <Input_Element T="decimal" @bind-Value="Value.Speed_Run" ValueCompare="ValueCompare?.Speed_Run" Label="@nameof(Value.Speed_Run).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Speed_Run))" />
            <Input_Element T="byte" @bind-Value="Value.MovementType" ValueCompare="ValueCompare?.MovementType" Label="@nameof(Value.MovementType).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.MovementType))" GetOptionsAsync_Func="GetMovementTypes" />
            <Input_Element T="uint" @bind-Value="Value.MovementID" ValueCompare="ValueCompare?.MovementID" Label="@nameof(Value.MovementID).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.MovementID))" />
            <Input_Element T="string" @bind-Value="Value.AiName" ValueCompare="ValueCompare?.AiName" Label="AI Name" OnInfoAdornmentClick="@(OpenInfoDialog(info.AiName))" GetOptionsAsync_Func="GetAiNames" />
            <Input_Element T="string" @bind-Value="Value.ScriptName" ValueCompare="ValueCompare?.ScriptName" Label="@nameof(Value.ScriptName).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.ScriptName))" />
        </MudItem>
    </PagedDtoContentPage>
    <PagedDtoContentPage>
        <MudItem xs="3">
            <Input_Element T="uint" @bind-Value="Value.DynamicFlags" ValueCompare="ValueCompare?.DynamicFlags" Label="@nameof(Value.DynamicFlags).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.DynamicFlags))" />
            <Input_Element T="uint" @bind-Value="Value.Flags_Extra" ValueCompare="ValueCompare?.Flags_Extra" Label="@nameof(Value.Flags_Extra).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Flags_Extra))" />
            <Input_Element T="ulong" @bind-Value="Value.NpcFlag" ValueCompare="ValueCompare?.NpcFlag" Label="@nameof(Value.NpcFlag).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.NpcFlag))" />
            <Input_Element T="uint" @bind-Value="Value.Spell_School_Immune_Mask" ValueCompare="ValueCompare?.Spell_School_Immune_Mask" Label="@nameof(Value.Spell_School_Immune_Mask).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Spell_School_Immune_Mask))" />
            <Input_Element T="ulong" @bind-Value="Value.Mechanic_Immune_Mask" ValueCompare="ValueCompare?.Mechanic_Immune_Mask" Label="@nameof(Value.Mechanic_Immune_Mask).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Mechanic_Immune_Mask))" />
        </MudItem>
        <MudItem xs="6">
            <Placeholder_Element Amount="4" />
            <InlineGroup>
                <LeftContent>
                    <Input_Element T="uint" @bind-Value="Value.Unit_Flags" ValueCompare="ValueCompare?.Unit_Flags" Label="@nameof(Value.Unit_Flags).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Unit_Flags))" />
                </LeftContent>
                <MiddleContent>
                    <Input_Element T="uint" @bind-Value="Value.Unit_Flags2" ValueCompare="ValueCompare?.Unit_Flags2" Label="@nameof(Value.Unit_Flags2).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Unit_Flags2))" />
                </MiddleContent>
                <RightContent>
                    <Input_Element T="uint" @bind-Value="Value.Unit_Flags3" ValueCompare="ValueCompare?.Unit_Flags3" Label="@nameof(Value.Unit_Flags3).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Unit_Flags3))" />
                </RightContent>
            </InlineGroup>
            <InlineGroup>
                <LeftContent>
                    <Input_Element T="uint" @bind-Value="Value.Type_Flags" ValueCompare="ValueCompare?.Type_Flags" Label="@nameof(Value.Type_Flags).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Type_Flags))" />
                </LeftContent>
                <RightContent>
                    <Input_Element T="uint" @bind-Value="Value.Type_Flags2" ValueCompare="ValueCompare?.Type_Flags2" Label="@nameof(Value.Type_Flags2).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Type_Flags2))" />
                </RightContent>
            </InlineGroup>
        </MudItem>
        <MudItem xs="3">
            <Input_Element T="int" @bind-Value="Value.VignetteID" ValueCompare="ValueCompare?.VignetteID" Label="@nameof(Value.VignetteID).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.VignetteID))" />
            <Input_Element T="int" @bind-Value="Value.WidgetSetID" ValueCompare="ValueCompare?.WidgetSetID" Label="@nameof(Value.WidgetSetID).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.WidgetSetID))" />
            <Input_Element T="int" @bind-Value="Value.WidgetSetUnitConditionID" ValueCompare="ValueCompare?.WidgetSetUnitConditionID" Label="@nameof(Value.WidgetSetUnitConditionID).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.WidgetSetUnitConditionID))" />
        </MudItem>
    </PagedDtoContentPage>
    <PagedDtoContentPage>
        <MudItem xs="3">
            <Input_Element T="decimal" @bind-Value="Value.ArmorModifier" ValueCompare="ValueCompare?.ArmorModifier" Label="@nameof(Value.ArmorModifier).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.ArmorModifier))" />
            <Input_Element T="decimal" @bind-Value="Value.DamageModifier" ValueCompare="ValueCompare?.DamageModifier" Label="@nameof(Value.DamageModifier).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.DamageModifier))" />
            <Input_Element T="decimal" @bind-Value="Value.ExperienceModifier" ValueCompare="ValueCompare?.ExperienceModifier" Label="@nameof(Value.ExperienceModifier).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.ExperienceModifier))" />
            <InlineGroup>
                <LeftContent>
                    <Input_Element T="decimal" @bind-Value="Value.HealthModifier" ValueCompare="ValueCompare?.HealthModifier" Label="@nameof(Value.HealthModifier).ToDisplayName()"OnInfoAdornmentClick="@(OpenInfoDialog(info.HealthModifier))" />
                </LeftContent>
                <RightContent>
                    <Input_Element T="decimal" @bind-Value="Value.HealthModifierExtra" ValueCompare="ValueCompare?.HealthModifierExtra" Label="Extra" OnInfoAdornmentClick="@(OpenInfoDialog(info.HealthModifierExtra))" />
                </RightContent>
            </InlineGroup>
            <InlineGroup>
                <LeftContent>
                    <Input_Element T="decimal" @bind-Value="Value.ManaModifier" ValueCompare="ValueCompare?.ManaModifier" Label="@nameof(Value.ManaModifier).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.ManaModifier))" />
                </LeftContent>
                <RightContent>
                    <Input_Element T="decimal" @bind-Value="Value.ManaModifierExtra" ValueCompare="ValueCompare?.ManaModifierExtra" Label="Extra" OnInfoAdornmentClick="@(OpenInfoDialog(info.ManaModifierExtra))" />
                </RightContent>
            </InlineGroup>
            <Input_Element T="int" @bind-Value="Value.HealthScalingExpansion" ValueCompare="ValueCompare?.HealthScalingExpansion" Label="@nameof(Value.HealthScalingExpansion).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.HealthScalingExpansion))" />
        </MudItem>
        <MudItem xs="6">
            <Placeholder_Element Amount="4" />
        </MudItem>
        <MudItem xs="3">
            <Input_Element T="sbyte" @bind-Value="Value.Dmgschool" ValueCompare="ValueCompare?.Dmgschool" Label="@("Damage School")" OnInfoAdornmentClick="@(OpenInfoDialog(info.Dmgschool))" GetOptionsAsync_Func="GetDmgschools" />
            <InlineGroup LeftContentWidth="60" RightContentWidth="40">
                <LeftContent>
                    <Input_Element T="uint" @bind-Value="Value.BaseAttackTime" ValueCompare="ValueCompare?.BaseAttackTime" Label="@nameof(Value.BaseAttackTime).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.BaseAttackTime))" />
                </LeftContent>
                <RightContent>
                    <Input_Element T="decimal" @bind-Value="Value.BaseVariance" ValueCompare="ValueCompare?.BaseVariance" Label="Variance" OnInfoAdornmentClick="@(OpenInfoDialog(info.BaseVariance))" />
                </RightContent>
            </InlineGroup>
            <InlineGroup LeftContentWidth="60" RightContentWidth="40">
                <LeftContent>
                    <Input_Element T="uint" @bind-Value="Value.RangeAttackTime" ValueCompare="ValueCompare?.RangeAttackTime" Label="@nameof(Value.RangeAttackTime).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.RangeAttackTime))" />
                </LeftContent>
                <RightContent>
                    <Input_Element T="decimal" @bind-Value="Value.RangeVariance" ValueCompare="ValueCompare?.RangeVariance" Label="Variance" OnInfoAdornmentClick="@(OpenInfoDialog(info.RangeVariance))" />
                </RightContent>
            </InlineGroup>
            <Input_Element T="int" @bind-Value="Value.Family" ValueCompare="ValueCompare?.Family" Label="@nameof(Value.Family).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Family))" GetOptionsAsync_Func="GetFamilies" />
            <Input_Element T="byte" @bind-Value="Value.Trainer_Class" ValueCompare="ValueCompare?.Trainer_Class" Label="@nameof(Value.Trainer_Class).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Trainer_Class))" />
            <Input_Element T="byte" @bind-Value="Value.RegenHealth" ValueCompare="ValueCompare?.RegenHealth" Label="@nameof(Value.RegenHealth).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.RegenHealth))" GetOptionsAsync_Func="GetTrueFalse" />
        </MudItem>
    </PagedDtoContentPage>
    <PagedDtoContentPage>
        <MudItem xs="3">
            <InlineGroup>
                <LeftContent>
                    <Input_Element T="uint" @bind-Value="Value.MinGold" ValueCompare="ValueCompare?.MinGold" Label="@nameof(Value.MinGold).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.MinGold))" />
                </LeftContent>
                <RightContent>
                    <Input_Element T="uint" @bind-Value="Value.MaxGold" ValueCompare="ValueCompare?.MaxGold" Label="@nameof(Value.MaxGold).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.MaxGold))" />
                </RightContent>
            </InlineGroup>
            <Input_Element T="uint" @bind-Value="Value.LootID" ValueCompare="ValueCompare?.LootID" Label="@nameof(Value.LootID).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.LootID))" />
            <Input_Element T="uint" @bind-Value="Value.PickpocketLoot" ValueCompare="ValueCompare?.PickpocketLoot" Label="@nameof(Value.PickpocketLoot).ToDisplayName()"OnInfoAdornmentClick="@(OpenInfoDialog(info.PickpocketLoot))" />
            <Input_Element T="uint" @bind-Value="Value.SkinLoot" ValueCompare="ValueCompare?.SkinLoot" Label="@nameof(Value.SkinLoot).ToDisplayName()"OnInfoAdornmentClick="@(OpenInfoDialog(info.SkinLoot))" />
            <Input_Element T="byte" @bind-Value="Value.Unit_Class" ValueCompare="ValueCompare?.Unit_Class" Label="@nameof(Value.Unit_Class).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Unit_Class))" GetOptionsAsync_Func="GetUnitClasses" />
            <Input_Element T="string" @bind-Value="Value.IconName" ValueCompare="ValueCompare?.IconName" Label="@nameof(Value.IconName).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.IconName))" GetOptionsAsync_Func="GetIconNames" />
        </MudItem>
        <MudItem xs="6">
            <Placeholder_Element Amount="4" />
            <InlineGroup>
                <LeftContent>
                    <Input_Element T="uint" @bind-Value="Value.Difficulty_Entry_1" ValueCompare="ValueCompare?.Difficulty_Entry_1" Label="@nameof(Value.Difficulty_Entry_1).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Difficulty_Entry_1))" />
                </LeftContent>
                <MiddleContent>
                    <Input_Element T="uint" @bind-Value="Value.Difficulty_Entry_2" ValueCompare="ValueCompare?.Difficulty_Entry_2" Label="@nameof(Value.Difficulty_Entry_2).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Difficulty_Entry_2))" />
                </MiddleContent>
                <RightContent>
                    <Input_Element T="uint" @bind-Value="Value.Difficulty_Entry_3" ValueCompare="ValueCompare?.Difficulty_Entry_3" Label="@nameof(Value.Difficulty_Entry_3).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Difficulty_Entry_3))" />
                </RightContent>
            </InlineGroup>
            <InlineGroup>
                <LeftContent>
                    <Input_Element T="uint" @bind-Value="Value.KillCredit1" ValueCompare="ValueCompare?.KillCredit1" Label="@nameof(Value.KillCredit1).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.KillCredit1))" />
                </LeftContent>
                <RightContent>
                    <Input_Element T="uint" @bind-Value="Value.KillCredit2" ValueCompare="ValueCompare?.KillCredit2" Label="@nameof(Value.KillCredit2).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.KillCredit2))" />
                </RightContent>
            </InlineGroup>
        </MudItem>
        <MudItem xs="3">
            <Input_Element T="int" @bind-Value="Value.CreatureDifficultyID" ValueCompare="ValueCompare?.CreatureDifficultyID" Label="@nameof(Value.CreatureDifficultyID).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.CreatureDifficultyID))" />
            <Input_Element T="decimal" @bind-Value="Value.HoverHeight" ValueCompare="ValueCompare?.HoverHeight" Label="@nameof(Value.HoverHeight).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.HoverHeight))" />
            <Input_Element T="uint" @bind-Value="Value.VehicleID" ValueCompare="ValueCompare?.VehicleID" Label="@nameof(Value.VehicleID).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.VehicleID))" />
            <Input_Element T="int" @bind-Value="Value.RequiredExpansion" ValueCompare="ValueCompare?.RequiredExpansion" Label="@nameof(Value.RequiredExpansion).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.RequiredExpansion))" GetOptionsAsync_Func="GetRequiredExpansions" />
            <Input_Element T="uint" @bind-Value="Value.Gossip_Menu_ID" ValueCompare="ValueCompare?.Gossip_Menu_ID" Label="@nameof(Value.Gossip_Menu_ID).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.Gossip_Menu_ID))" />
            <Input_Element T="string" @bind-Value="Value.StringID" ValueCompare="ValueCompare?.StringID" Label="@nameof(Value.StringID).ToDisplayName()" OnInfoAdornmentClick="@(OpenInfoDialog(info.StringID))" />
        </MudItem>
    </PagedDtoContentPage>
</PagedDtoContent>

@code {
    CreatureTemplateInfo info = new();

    async Task<Dictionary<string, string>> GetAiNames()
    {
        return Enum.GetValues<CreatureTemplateAiName>().ToDictionary(key => key.ToString(), value => value.ToString());
    }

    async Task<Dictionary<sbyte, string>> GetDmgschools()
    {
        return Enum.GetValues<CreatureTemplateDmgschool>().ToDictionary(key => (sbyte)key, value => value.ToDisplayString());
    }

    async Task<Dictionary<int, string>> GetFamilies()
    {
        return Enum.GetValues<CreatureTemplateFamily>().ToDictionary(key => (int)key, value => value.ToDisplayString());
    }

    async Task<Dictionary<string, string>> GetIconNames()
    {
        return Enum.GetValues<CreatureTemplateIconName>().ToDictionary(key => key.ToString(), value => value.ToString());
    }

    async Task<Dictionary<byte, string>> GetMovementTypes()
    {
        return Enum.GetValues<CreatureTemplateMovementType>().ToDictionary(key => (byte)key, value => value.ToDisplayString());
    }

    async Task<Dictionary<byte, string>> GetRanks()
    {
        return Enum.GetValues<CreatureTemplateRank>().ToDictionary(key => (byte)key, value => value.ToDisplayString());
    }

    async Task<Dictionary<byte, string>> GetUnitClasses()
    {
        return Enum.GetValues<CreatureTemplateUnitClass>().ToDictionary(key => (byte)key, value => value.ToDisplayString());
    }

    async Task<Dictionary<int, string>> GetRequiredExpansions()
    {
        return Enum.GetValues<CreatureTemplateRequiredExpansion>().ToDictionary(key => (int)key, value => value.ToDisplayString());
    }

    async Task<Dictionary<byte, string>> GetTrueFalse()
    {
        return new Dictionary<byte, string>() { 
            { 0, "False" }, 
            { 1, "True" } 
        };
    }
}